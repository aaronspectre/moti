{% extends 'home.html' %}
{% load static %}
{% load filters %}
{% block content %}
	{% if show_add_product %}
		<div class="add-form" id="add-form">
			<div class="add-form-cover"></div>
			<form action="{% url 'add_product' %}" method="post" class="add-product-form" enctype="multipart/form-data">
				<div class="add-form-section">
					<label for="name"><small>Product Name</small></label>
					<input required type="text" id="name" name="name_uz" placeholder="Uzbek">
					<input required type="text" name="name_ru" placeholder="Russian">
					<input required type="text" name="name_en" placeholder="English">
					<label for="image"><small>Product Image</small></label>
					<input type="file" id="image" name="image" accept=".jpg, .jpeg">
					{% csrf_token %}
				</div>
				<div class="add-form-section">
					<label for="description"><small>Description</small></label>
					<textarea required type="text" id="description" name="desc_uz" placeholder="Uzbek"></textarea>
					<textarea required type="text" name="desc_ru" placeholder="Russian"></textarea>
					<textarea required type="text" name="desc_en" placeholder="English"></textarea>
				</div>
				<div class="add-form-section">
					<label for="discount"><small>Discount</small></label>
					<input required type="number" id="discount" name="discount" placeholder="0.0">
					<label for="price"><small>Price</small></label>
					<input required type="number" id="price" name="price" placeholder="0.0">
					<label for="time"><small>Preparing Time (in minutes)</small></label>
					<input required type="number" id="time" name="time" placeholder="0">
					<label for="category"><small>Category</small></label>
					<select name="category" id="category">
						{% for category in categories %}
							<option value="{{category.id}}">{{category.categoryName.ru.text}}</option>
						{% endfor %}
					</select>
				</div>
				<div class="add-form-section">
					<button type="submit">Save</button>
				</div>
			</form>
		</div>
		<button id="call-form-button" data-link="{% url 'add_product' %}"><i class="fas fa-plus"></i></button>
	{% elif show_add_category %}
		<div class="add-form" id="add-form">
			<div class="add-form-cover"></div>
			<form action="{% url 'add_category' %}" method="post" class="add-category-form">
				<div class="add-form-section">
					<label for="#name"><small>Cateogry Name</small></label>
					<input required type="text" id="name" name="name_uz" placeholder="Uzbek">
					<input required type="text" name="name_ru" placeholder="Russian">
					<input required type="text" name="name_en" placeholder="English">
					<button type="submit">Save</button>
					{% csrf_token %}
				</div>
			</form>
		</div>
		<button id="call-form-button" data-link="{% url 'add_category' %}"><i class="fas fa-plus"></i></button>
	{% endif %}
		<div class="wrap">
			<div class="sidebar">
				<div class="sidemenu">
					<img src="{% static 'moti.svg' %}" alt="logo">
					<ul>
						<li><a href="{% url 'home' %}"><i class="fal fa-home"></i></a></li>
						<li><a href="{% url 'products' %}"><i class="fal fa-cart-shopping"></i></a></li>
						<li><a href="{% url 'categories' %}"><i class="fal fa-list-timeline"></i></a></li>
						<li><a href="{% url 'fees' %}"><i class="fal fa-road"></i></a></li>
						{% if 'MANAGER' in request.session.roles %}
						<li><a href="{% url 'users' %}"><i class="fal fa-users"></i></a></li>
						{% endif %}
					</ul>
				</div>
			</div>
			<div class="content">
				<div class="navbar">
					<form action="">
						<input type="text" placeholder="Search">
						<button><i class="fal fa-search"></i></button>
					</form>
					<a href="{% url 'logout' %}"><i class="fal fa-arrow-right-from-bracket"></i></a>
				</div>
				<div class="board">
					{% if show_add_product %}
						{% for product in products %}
							<div class="order">
								<div class="order-body">
									<img src="{{product.imageUrl}}" alt="{{product.productName.ru.text}}">
									<strong>{{product.productName.ru.text}}</strong>
									<p><i class="fal fa-list-timeline"></i>&ensp;{{product.category}}</p>
									<p><i class="fal fa-circle-dollar"></i>&ensp;{{product.price}} sum</p>
									<p><i class="fal fa-receipt"></i>&ensp;{{product.discount}}</p>
									<p><i class="fal fa-clock"></i>&ensp;{{product.readyTime}}</p>
									<p><i class="fal fa-hashtag"></i>&ensp;{{product.id}}</p>
									<p><small>{{product.description.ru.text}} </small></p>
								</div>
								<div class="order-actions">
									<a href="{% url 'delete_product' product.id %}"><small><i class="fal fa-trash"></i>&ensp;Remove</small></a>
									<a onclick="editProduct(this, `{% url 'update_product' product.id %}`, {{forloop.counter}})" href="javascript:void(0);"><small><i class="fal fa-pen-to-square"></i>&ensp;Edit</small></a>
								</div>
							</div>
						{% endfor %}
					{% elif show_add_category %}
						{% for category in categories %}
							<div class="order">
								<div class="order-body">
									<strong>id: {{category.id}}</strong>
									<p><b>Uz:</b>&ensp;<span class="card-name-uz">{{category.categoryName.uz.text}}</span></p>
									<p><b>Ru:</b>&ensp;<span class="card-name-ru">{{category.categoryName.ru.text}}</span></p>
									<p><b>En:</b>&ensp;<span class="card-name-en">{{category.categoryName.eng.text}}</span></p>
								</div>
								<div class="order-actions">
									<a href="{% url 'delete_category' category.id %}"><small><i class="fal fa-trash"></i>&ensp;Remove</small></a>
									<a href="javascript:void(0);" onclick="editCategory(this, `{% url 'update_category' category.id %}`)"><small><i class="fal fa-pen-to-square"></i>&ensp;Edit</small></a>
								</div>
							</div>
						{% endfor %}
					{% else %}
						<p><small>0 items are available</small></p>
					{% endif %}
				</div>
			</div>
		</div>

		<script src="{% static 'script.js' %}"></script>
		<script>
			products = {{products|format_data|safe}}
		</script>
{% endblock %}